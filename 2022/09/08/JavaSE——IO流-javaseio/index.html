<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>JavaSE——IO流 | Hexo</title><script src="//unpkg.com/valine/dist/Valine.min.js"></script><script>var config = {"root":"/","path":"search.json"}</script><script src="//unpkg.com/mermaid@8.13.5/dist/mermaid.min.js"></script><script>mermaid.initialize({
 startOnLoad: true
 , theme: 'dark'
});</script><link rel="stylesheet" href="/css/arknights.css"><link rel="stylesheet" href="//unpkg.com/@highlightjs/cdn-assets@11.4.0/styles/atom-one-dark-reasonable.min.css"><style>@font-face {
 font-family: BenderLight;
 src: local('Bender'), url("/font/BenderLight.ttf");
}
@font-face {
 font-family: 'JetBrains Mono';
 src: local('JetBrains Mono'), url('/font/JetBrainsMono-Regular.woff2') format('woff2');
}</style><meta name="generator" content="Hexo 6.3.0"></head><body style="background-image:url(https://ak.hypergryph.com/assets/index/images/ak/pc/bk.jpg);"><main><header class="closed"><nav><div class="navBtn"><i class="navBtnIcon"><span class="navBtnIconBar"></span><span class="navBtnIconBar"></span><span class="navBtnIconBar"></span></i></div><ol class="navContent"><li class="navItem" id="search-header"><span class="navItemTitle"><input autocomplete="off" autocorrect="off" autocapitalize="none" placeholder="数据检索" spellcheck="false" maxlength="50" type="text" id="search-input"></span></li><li class="navItem"><a class="navBlock" href="/"><span class="navItemTitle">舰船主页</span></a></li><li class="navItem"><a class="navBlock" href="/about/"><span class="navItemTitle">关于博士</span></a></li><li class="navItem" matchdata="categories,tags"><a class="navBlock" href="/archives/"><span class="navItemTitle">博士の文章</span></a></li><li class="navItem"><a class="navBlock" href="/valine/"><span class="navItemTitle">建设中...</span></a></li></ol></nav><div class="search-popup"><div id="search-result"></div></div></header><article><div id="post-bg"><div id="post-title"><h1>JavaSE——IO流</h1><div id="post-info"><span>First Post: <div class="control"><time datetime="2022-09-07T17:02:51.391Z" id="date"> 2022-09-08</time></div></span><br><span>Last Update: <div class="control"><time datetime="2022-09-07T17:02:51.391Z" id="updated"> 2022-09-08</time></div></span><br><span>Word Count: <div class="control">7.7k</div></span><br><span>Read Time: <div class="control">35 min</div></span></div></div><hr><div id="post-content"><h2 id="什么是IO流"><a href="#什么是IO流" class="headerlink" title="什么是IO流"></a>什么是IO流</h2><p>I : Input<br>O : Output<br>通过IO可以完成硬盘文件的读和写。  </p>
<p><img src="https://blog-1311748085.cos.ap-beijing.myqcloud.com/img/001-%E4%BB%80%E4%B9%88%E6%98%AFIO.png"></p>
<h2 id="IO流的分类"><a href="#IO流的分类" class="headerlink" title="IO流的分类"></a>IO流的分类</h2><p>有多种分类方式：</p>
<p>一种方式是按照流的方向进行分类：<br>以内存作为参照物，<br>往内存中去，叫做输入(Input)。或者叫做读(Read)。<br>从内存中出来，叫做输出(Output)。或者叫做写(Write)。</p>
<p>另一种方式是按照读取数据方式不同进行分类：<br>有的流是按照字节的方式读取数据，一次读取1个字节byte，等同于一次读取8个二进制位。<br>这种流是万能的，什么类型的文件都可以读取。包括：文本文件，图片，声音文件，视频文件等….<br>假设文件file1.txt，采用字节流的话是这样读的：<br>a中国bc张三fe<br>第一次读：一个字节，正好读到’a’<br>第二次读：一个字节，正好读到’中’字符的一半。<br>第三次读：一个字节，正好读到’中’字符的另外一半。  </p>
<p>有的流是按照字符的方式读取数据的，一次读取一个字符，这种流是为了方便读取<br>普通文本文件而存在的，这种流不能读取：图片、声音、视频等文件。只能读取纯文本文件，连word文件都无法读取。<br>假设文件file1.txt，采用字符流的话是这样读的：<br>a中国bc张三fe<br>第一次读：’a’字符（’a’字符在windows系统中占用1个字节。）<br>第二次读：’中’字符（’中’字符在windows系统中占用2个字节。）  </p>
<p>综上所述：流的分类<br><strong>输入流、输出流</strong><br><strong>字节流、字符流</strong></p>
<h2 id="IO流如何学习？"><a href="#IO流如何学习？" class="headerlink" title="IO流如何学习？"></a>IO流如何学习？</h2><p>Java中的IO流都已经写好了，我们程序员不需要关心,我们最主要还是掌握，<br>在java中已经提供了哪些流，每个流的特点是什么，每个流对象上的常用方法有<br>哪些？？？？<br>java中所有的流都是在：java.io.*;下。  </p>
<p>java中主要还是研究：<br>        <strong>怎么new流对象。</strong><br>        <strong>调用流对象的哪个方法是读，哪个方法是写。</strong></p>
<h2 id="java-IO流的四大家族"><a href="#java-IO流的四大家族" class="headerlink" title="java IO流的四大家族"></a>java IO流的四大家族</h2><p>四大家族的首领： </p>
<p>java.io.InputStream  字节输入流</p>
<p>java.io.OutputStream 字节输出流</p>
<p>java.io.Reader		字符输入流</p>
<p>java.io.Writer		字符输出流</p>
<p>四大家族的首领都是抽象类。(abstract class)</p>
<p><strong>注意：在java中只要“类名”以Stream结尾的都是字节流。以“Reader&#x2F;Writer”结尾的都是字符流。</strong></p>
<p>所有的流都实现了：<br>java.io.Closeable接口，都是可关闭的，都有close()方法。<br>流毕竟是一个管道，这个是内存和硬盘之间的通道，用完之后一定要关闭，<br>不然会耗费(占用)很多资源。<strong>养成好习惯，用完流一定要关闭。</strong>  </p>
<p>所有的输出流都实现了：<br>            java.io.Flushable接口，都是可刷新的，都有flush()方法。<br>            <strong>养成一个好习惯，输出流在最终输出之后，一定要记得flush()</strong><br>            刷新一下。这个刷新表示将通道&#x2F;管道当中剩余未输出的数据<br>            <strong>强行输出完（清空管道！）刷新的作用就是清空管道。</strong><br><strong>注意：如果没有flush()可能会导致丢失数据。</strong>  </p>
<h2 id="需要掌握的IO流"><a href="#需要掌握的IO流" class="headerlink" title="需要掌握的IO流"></a>需要掌握的IO流</h2><p>文件专属：<br>java.io.FileInputStream（掌握）<br>java.io.FileOutputStream（掌握）<br>java.io.FileReader<br>java.io.FileWriter  </p>
<p>转换流：（将字节流转换成字符流）<br>        java.io.InputStreamReader<br>        java.io.OutputStreamWriter  </p>
<p>缓冲流专属：<br>        java.io.BufferedReader<br>        java.io.BufferedWriter<br>        java.io.BufferedInputStream<br>        java.io.BufferedOutputStream</p>
<p>数据流专属：<br>        java.io.DataInputStream<br>        java.io.DataOutputStream</p>
<p>标准输出流：<br>        java.io.PrintWriter<br>        java.io.PrintStream（掌握）</p>
<p>对象专属流：<br>        java.io.ObjectInputStream（掌握）<br>        java.io.ObjectOutputStream（掌握）</p>
<h3 id="java-io-FileInputStream"><a href="#java-io-FileInputStream" class="headerlink" title="java.io.FileInputStream:"></a>java.io.FileInputStream:</h3><p>1、文件字节输入流，万能的，任何类型的文件都可以采用这个流来读。<br>2、字节的方式，完成输入的操作，完成读的操作（硬盘—&gt; 内存）</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.io.FileInputStream;<br><span class="hljs-keyword">import</span> java.io.FileNotFoundException;<br><span class="hljs-keyword">import</span> java.io.IOException;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">FileInputStreamTest01</span> &#123;<br>	<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>		<span class="hljs-type">FileInputStream</span> <span class="hljs-variable">fis</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>		<span class="hljs-keyword">try</span> &#123;<br>			<span class="hljs-comment">// 创建文件字节输入流对象</span><br>			<span class="hljs-comment">// 文件路径：D:\course\JavaProjects\02-JavaSE\temp （IDEA会自动把\编程\\，因为java中\表示转义）</span><br>			<span class="hljs-comment">// 以下都是采用了：绝对路径的方式。</span><br>			<span class="hljs-comment">//FileInputStream fis = new FileInputStream(&quot;D:\\course\\JavaProjects\\02-JavaSE\\temp&quot;);</span><br>			<span class="hljs-comment">// 写成这个/也是可以的。</span><br>			fis = <span class="hljs-keyword">new</span> <span class="hljs-title class_">FileInputStream</span>(<span class="hljs-string">&quot;D:/course/JavaProjects/02-JavaSE/temp&quot;</span>);<br><br>			<span class="hljs-comment">// 开始读</span><br>			<span class="hljs-type">int</span> <span class="hljs-variable">readData</span> <span class="hljs-operator">=</span> fis.read(); <span class="hljs-comment">// 这个方法的返回值是：读取到的“字节”本身。</span><br>			System.out.println(readData); <span class="hljs-comment">//97</span><br><br>			readData = fis.read();<br>			System.out.println(readData); <span class="hljs-comment">//98</span><br><br>			readData = fis.read();<br>			System.out.println(readData); <span class="hljs-comment">//99</span><br><br>			readData = fis.read();<br>			System.out.println(readData); <span class="hljs-comment">//100</span><br><br>			readData = fis.read();<br>			System.out.println(readData); <span class="hljs-comment">//101</span><br><br>			readData = fis.read();<br>			System.out.println(readData); <span class="hljs-comment">//102</span><br><br>			<span class="hljs-comment">// 已经读到文件的末尾了，再读的时候读取不到任何数据，返回-1.</span><br>			readData = fis.read();<br>			System.out.println(readData);<br><br>			readData = fis.read();<br>			System.out.println(readData);<br><br>			readData = fis.read();<br>			System.out.println(readData);<br><br>		&#125; <span class="hljs-keyword">catch</span> (FileNotFoundException e) &#123;<br>			e.printStackTrace();<br>		&#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>			e.printStackTrace();<br>		&#125; <span class="hljs-keyword">finally</span> &#123;<br>			<span class="hljs-comment">// 在finally语句块当中确保流一定关闭。</span><br>			<span class="hljs-keyword">if</span> (fis != <span class="hljs-literal">null</span>) &#123; <span class="hljs-comment">// 避免空指针异常！</span><br>				<span class="hljs-comment">// 关闭流的前提是：流不是空。流是null的时候没必要关闭。</span><br>				<span class="hljs-keyword">try</span> &#123;<br>					fis.close();<br>				&#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>					e.printStackTrace();<br>				&#125;<br>			&#125;<br>		&#125;<br>	&#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>改进版：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.io.FileInputStream;<br><span class="hljs-keyword">import</span> java.io.FileNotFoundException;<br><span class="hljs-keyword">import</span> java.io.IOException;<br><br><span class="hljs-comment">/*</span><br><span class="hljs-comment">对第一个程序进行改进。循环方式。</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">分析这个程序的缺点：</span><br><span class="hljs-comment">    一次读取一个字节byte，这样内存和硬盘交互太频繁，基本上时间/资源都耗费</span><br><span class="hljs-comment">    在交互上面了。能不能一次读取多个字节呢？可以。</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">FileInputStreamTest02</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">FileInputStream</span> <span class="hljs-variable">fis</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>        <span class="hljs-keyword">try</span> &#123;<br>            fis = <span class="hljs-keyword">new</span> <span class="hljs-title class_">FileInputStream</span>(<span class="hljs-string">&quot;D:\\course\\JavaProjects\\02-JavaSE\\temp&quot;</span>);<br><br>            <span class="hljs-comment">/*while(true) &#123;</span><br><span class="hljs-comment">                int readData = fis.read();</span><br><span class="hljs-comment">                if(readData == -1) &#123;</span><br><span class="hljs-comment">                    break;</span><br><span class="hljs-comment">                &#125;</span><br><span class="hljs-comment">                System.out.println(readData);</span><br><span class="hljs-comment">            &#125;*/</span><br><br>            <span class="hljs-comment">// 改造while循环</span><br>            <span class="hljs-type">int</span> <span class="hljs-variable">readData</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>            <span class="hljs-keyword">while</span>((readData = fis.read()) != -<span class="hljs-number">1</span>)&#123;<br>                System.out.println(readData);<br>            &#125;<br><br>        &#125; <span class="hljs-keyword">catch</span> (FileNotFoundException e) &#123;<br>            e.printStackTrace();<br>        &#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>            e.printStackTrace();<br>        &#125; <span class="hljs-keyword">finally</span> &#123;<br>            <span class="hljs-keyword">if</span> (fis != <span class="hljs-literal">null</span>) &#123;<br>                <span class="hljs-keyword">try</span> &#123;<br>                    fis.close();<br>                &#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>                    e.printStackTrace();<br>                &#125;<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<p> <strong>int read(byte[] data)</strong><br>一次最多读取 b.length 个字节。<br>减少硬盘和内存的交互，提高程序的执行效率。<br>往byte[]数组当中读。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.io.FileInputStream;<br><span class="hljs-keyword">import</span> java.io.FileNotFoundException;<br><span class="hljs-keyword">import</span> java.io.IOException;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">FileInputStreamTest03</span> &#123;<br>	<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>		<span class="hljs-type">FileInputStream</span> <span class="hljs-variable">fis</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>		<span class="hljs-keyword">try</span> &#123;<br>			<span class="hljs-comment">// 相对路径的话呢？相对路径一定是从当前所在的位置作为起点开始找！</span><br>			<span class="hljs-comment">// IDEA默认的当前路径是哪里？工程Project的根就是IDEA的默认当前路径。</span><br>			<span class="hljs-comment">//fis = new FileInputStream(&quot;tempfile3&quot;);</span><br>			<span class="hljs-comment">//fis = new FileInputStream(&quot;chapter23/tempfile2&quot;);</span><br>			<span class="hljs-comment">//fis = new FileInputStream(&quot;chapter23/src/tempfile3&quot;);</span><br>			fis = <span class="hljs-keyword">new</span> <span class="hljs-title class_">FileInputStream</span>(<span class="hljs-string">&quot;chapter23/src/com/bjpowernode/java/io/tempfile4&quot;</span>);<br><br>			<span class="hljs-comment">// 开始读，采用byte数组，一次读取多个字节。最多读取“数组.length”个字节。</span><br>			<span class="hljs-type">byte</span>[] bytes = <span class="hljs-keyword">new</span> <span class="hljs-title class_">byte</span>[<span class="hljs-number">4</span>]; <span class="hljs-comment">// 准备一个4个长度的byte数组，一次最多读取4个字节。</span><br>			<span class="hljs-comment">// 这个方法的返回值是：读取到的字节数量。（不是字节本身）</span><br>			<span class="hljs-type">int</span> <span class="hljs-variable">readCount</span> <span class="hljs-operator">=</span> fis.read(bytes);<br>			System.out.println(readCount); <span class="hljs-comment">// 第一次读到了4个字节。</span><br>			<span class="hljs-comment">// 将字节数组全部转换成字符串</span><br>			<span class="hljs-comment">//System.out.println(new String(bytes)); // abcd</span><br>			<span class="hljs-comment">// 不应该全部都转换，应该是读取了多少个字节，转换多少个。</span><br>			System.out.println(<span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(bytes,<span class="hljs-number">0</span>, readCount));<br><br>			readCount = fis.read(bytes); <span class="hljs-comment">// 第二次只能读取到2个字节。</span><br>			System.out.println(readCount); <span class="hljs-comment">// 2</span><br>			<span class="hljs-comment">// 将字节数组全部转换成字符串</span><br>			<span class="hljs-comment">//System.out.println(new String(bytes)); // efcd</span><br>			<span class="hljs-comment">// 不应该全部都转换，应该是读取了多少个字节，转换多少个。</span><br>			System.out.println(<span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(bytes,<span class="hljs-number">0</span>, readCount));<br><br>			readCount = fis.read(bytes); <span class="hljs-comment">// 1个字节都没有读取到返回-1</span><br>			System.out.println(readCount); <span class="hljs-comment">// -1</span><br><br>		&#125; <span class="hljs-keyword">catch</span> (FileNotFoundException e) &#123;<br>			e.printStackTrace();<br>		&#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>			e.printStackTrace();<br>		&#125; <span class="hljs-keyword">finally</span> &#123;<br>			<span class="hljs-keyword">if</span> (fis != <span class="hljs-literal">null</span>) &#123;<br>				<span class="hljs-keyword">try</span> &#123;<br>					fis.close();<br>				&#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>					e.printStackTrace();<br>				&#125;<br>			&#125;<br>		&#125;<br>	&#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>最终版：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.io.FileInputStream;<br><span class="hljs-keyword">import</span> java.io.IOException;<br><br><span class="hljs-comment">/*</span><br><span class="hljs-comment">最终版，需要掌握。</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">FileInputStreamTest04</span> &#123;<br>	<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>		<span class="hljs-type">FileInputStream</span> <span class="hljs-variable">fis</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>		<span class="hljs-keyword">try</span> &#123;<br>			fis = <span class="hljs-keyword">new</span> <span class="hljs-title class_">FileInputStream</span>(<span class="hljs-string">&quot;chapter23/src/tempfile3&quot;</span>);<br>			<span class="hljs-comment">// 准备一个byte数组</span><br>			<span class="hljs-type">byte</span>[] bytes = <span class="hljs-keyword">new</span> <span class="hljs-title class_">byte</span>[<span class="hljs-number">4</span>];<br>            <span class="hljs-comment">/*while(true)&#123;</span><br><span class="hljs-comment">                int readCount = fis.read(bytes);</span><br><span class="hljs-comment">                if(readCount == -1)&#123;</span><br><span class="hljs-comment">                    break;</span><br><span class="hljs-comment">                &#125;</span><br><span class="hljs-comment">                // 把byte数组转换成字符串，读到多少个转换多少个。</span><br><span class="hljs-comment">                System.out.print(new String(bytes, 0, readCount));</span><br><span class="hljs-comment">            &#125;*/</span><br><br>			<span class="hljs-type">int</span> readCount;<br>			<span class="hljs-keyword">while</span>((readCount = fis.read(bytes)) != -<span class="hljs-number">1</span>) &#123;<br>				System.out.print(<span class="hljs-keyword">new</span> <span class="hljs-title class_">String</span>(bytes, <span class="hljs-number">0</span>, readCount));<br>			&#125;<br><br>		&#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>			e.printStackTrace();<br>		&#125; <span class="hljs-keyword">finally</span> &#123;<br>			<span class="hljs-keyword">if</span> (fis != <span class="hljs-literal">null</span>) &#123;<br>				<span class="hljs-keyword">try</span> &#123;<br>					fis.close();<br>				&#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>					e.printStackTrace();<br>				&#125;<br>			&#125;<br>		&#125;<br>	&#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>其他方法：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.io.FileInputStream;<br><span class="hljs-keyword">import</span> java.io.FileNotFoundException;<br><span class="hljs-keyword">import</span> java.io.IOException;<br><br><span class="hljs-comment">/*</span><br><span class="hljs-comment">FileInputStream类的其它常用方法：</span><br><span class="hljs-comment">    int available()：返回流当中剩余的没有读到的字节数量</span><br><span class="hljs-comment">    long skip(long n)：跳过几个字节不读。</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">FileInputStreamTest05</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">FileInputStream</span> <span class="hljs-variable">fis</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>        <span class="hljs-keyword">try</span> &#123;<br>            fis = <span class="hljs-keyword">new</span> <span class="hljs-title class_">FileInputStream</span>(<span class="hljs-string">&quot;tempfile&quot;</span>);<br>            System.out.println(<span class="hljs-string">&quot;总字节数量：&quot;</span> + fis.available());<br>            <span class="hljs-comment">// 读1个字节</span><br>            <span class="hljs-comment">//int readByte = fis.read();</span><br>            <span class="hljs-comment">// 还剩下可以读的字节数量是：5</span><br>            <span class="hljs-comment">//System.out.println(&quot;剩下多少个字节没有读：&quot; + fis.available());</span><br>            <span class="hljs-comment">// 这个方法有什么用？</span><br>            <span class="hljs-comment">//byte[] bytes = new byte[fis.available()]; // 这种方式不太适合太大的文件，因为byte[]数组不能太大。</span><br>            <span class="hljs-comment">// 不需要循环了。</span><br>            <span class="hljs-comment">// 直接读一次就行了。</span><br>            <span class="hljs-comment">//int readCount = fis.read(bytes); // 6</span><br>            <span class="hljs-comment">//System.out.println(new String(bytes)); // abcdef</span><br><br>            <span class="hljs-comment">// skip跳过几个字节不读取，这个方法也可能以后会用！</span><br>            fis.skip(<span class="hljs-number">3</span>);<br>            System.out.println(fis.read()); <span class="hljs-comment">//100</span><br><br>        &#125; <span class="hljs-keyword">catch</span> (FileNotFoundException e) &#123;<br>            e.printStackTrace();<br>        &#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>            e.printStackTrace();<br>        &#125; <span class="hljs-keyword">finally</span> &#123;<br>            <span class="hljs-keyword">if</span> (fis != <span class="hljs-literal">null</span>) &#123;<br>                <span class="hljs-keyword">try</span> &#123;<br>                    fis.close();<br>                &#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>                    e.printStackTrace();<br>                &#125;<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<h3 id="java-io-FileOutputStream"><a href="#java-io-FileOutputStream" class="headerlink" title="java.io.FileOutputStream"></a>java.io.FileOutputStream</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.io.FileNotFoundException;<br><span class="hljs-keyword">import</span> java.io.FileOutputStream;<br><span class="hljs-keyword">import</span> java.io.IOException;<br><br><span class="hljs-comment">/**</span><br><span class="hljs-comment"> * 文件字节输出流，负责写。</span><br><span class="hljs-comment"> * 从内存到硬盘。</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">FileOutputStreamTest01</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">FileOutputStream</span> <span class="hljs-variable">fos</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>        <span class="hljs-keyword">try</span> &#123;<br>            <span class="hljs-comment">// myfile文件不存在的时候会自动新建！</span><br>            <span class="hljs-comment">// 这种方式谨慎使用，这种方式会先将原文件清空，然后重新写入。</span><br>            <span class="hljs-comment">//fos = new FileOutputStream(&quot;myfile&quot;);</span><br>            <span class="hljs-comment">//fos = new FileOutputStream(&quot;chapter23/src/tempfile3&quot;);</span><br><br>            <span class="hljs-comment">// 以追加的方式在文件末尾写入。不会清空原文件内容。</span><br>            fos = <span class="hljs-keyword">new</span> <span class="hljs-title class_">FileOutputStream</span>(<span class="hljs-string">&quot;chapter23/src/tempfile3&quot;</span>, <span class="hljs-literal">true</span>);<br>            <span class="hljs-comment">// 开始写。</span><br>            <span class="hljs-type">byte</span>[] bytes = &#123;<span class="hljs-number">97</span>, <span class="hljs-number">98</span>, <span class="hljs-number">99</span>, <span class="hljs-number">100</span>&#125;;<br>            <span class="hljs-comment">// 将byte数组全部写出！</span><br>            fos.write(bytes); <span class="hljs-comment">// abcd</span><br>            <span class="hljs-comment">// 将byte数组的一部分写出！</span><br>            fos.write(bytes, <span class="hljs-number">0</span>, <span class="hljs-number">2</span>); <span class="hljs-comment">// 再写出ab</span><br><br>            <span class="hljs-comment">// 字符串</span><br>            <span class="hljs-type">String</span> <span class="hljs-variable">s</span> <span class="hljs-operator">=</span> <span class="hljs-string">&quot;我是一个中国人，我骄傲！！！&quot;</span>;<br>            <span class="hljs-comment">// 将字符串转换成byte数组。</span><br>            <span class="hljs-type">byte</span>[] bs = s.getBytes();<br>            <span class="hljs-comment">// 写</span><br>            fos.write(bs);<br><br>            <span class="hljs-comment">// 写完之后，最后一定要刷新</span><br>            fos.flush();<br>        &#125; <span class="hljs-keyword">catch</span> (FileNotFoundException e) &#123;<br>            e.printStackTrace();<br>        &#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>            e.printStackTrace();<br>        &#125; <span class="hljs-keyword">finally</span> &#123;<br>            <span class="hljs-keyword">if</span> (fos != <span class="hljs-literal">null</span>) &#123;<br>                <span class="hljs-keyword">try</span> &#123;<br>                    fos.close();<br>                &#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>                    e.printStackTrace();<br>                &#125;<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<h3 id="文件的复制原理"><a href="#文件的复制原理" class="headerlink" title="文件的复制原理"></a>文件的复制原理</h3><p><img src="https://blog-1311748085.cos.ap-beijing.myqcloud.com/img/002-%E6%96%87%E4%BB%B6%E7%9A%84%E5%A4%8D%E5%88%B6%E5%8E%9F%E7%90%86.png"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.io.FileInputStream;<br><span class="hljs-keyword">import</span> java.io.FileNotFoundException;<br><span class="hljs-keyword">import</span> java.io.FileOutputStream;<br><span class="hljs-keyword">import</span> java.io.IOException;<br><br><span class="hljs-comment">/*</span><br><span class="hljs-comment">使用FileInputStream + FileOutputStream完成文件的拷贝。</span><br><span class="hljs-comment">拷贝的过程应该是一边读，一边写。</span><br><span class="hljs-comment">使用以上的字节流拷贝文件的时候，文件类型随意，万能的。什么样的文件都能拷贝。</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Copy01</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">FileInputStream</span> <span class="hljs-variable">fis</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>        <span class="hljs-type">FileOutputStream</span> <span class="hljs-variable">fos</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>        <span class="hljs-keyword">try</span> &#123;<br>            <span class="hljs-comment">// 创建一个输入流对象</span><br>            fis = <span class="hljs-keyword">new</span> <span class="hljs-title class_">FileInputStream</span>(<span class="hljs-string">&quot;D:\\course\\02-JavaSE\\video\\chapter01\\动力节点-JavaSE-杜聚宾-001-文件扩展名的显示.avi&quot;</span>);<br>            <span class="hljs-comment">// 创建一个输出流对象</span><br>            fos = <span class="hljs-keyword">new</span> <span class="hljs-title class_">FileOutputStream</span>(<span class="hljs-string">&quot;C:\\动力节点-JavaSE-杜聚宾-001-文件扩展名的显示.avi&quot;</span>);<br><br>            <span class="hljs-comment">// 最核心的：一边读，一边写</span><br>            <span class="hljs-type">byte</span>[] bytes = <span class="hljs-keyword">new</span> <span class="hljs-title class_">byte</span>[<span class="hljs-number">1024</span> * <span class="hljs-number">1024</span>]; <span class="hljs-comment">// 1MB（一次最多拷贝1MB。）</span><br>            <span class="hljs-type">int</span> <span class="hljs-variable">readCount</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>            <span class="hljs-keyword">while</span>((readCount = fis.read(bytes)) != -<span class="hljs-number">1</span>) &#123;<br>                fos.write(bytes, <span class="hljs-number">0</span>, readCount);<br>            &#125;<br><br>            <span class="hljs-comment">// 刷新，输出流最后要刷新</span><br>            fos.flush();<br>        &#125; <span class="hljs-keyword">catch</span> (FileNotFoundException e) &#123;<br>            e.printStackTrace();<br>        &#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>            e.printStackTrace();<br>        &#125; <span class="hljs-keyword">finally</span> &#123;<br>            <span class="hljs-comment">// 分开try，不要一起try。</span><br>            <span class="hljs-comment">// 一起try的时候，其中一个出现异常，可能会影响到另一个流的关闭。</span><br>            <span class="hljs-keyword">if</span> (fos != <span class="hljs-literal">null</span>) &#123;<br>                <span class="hljs-keyword">try</span> &#123;<br>                    fos.close();<br>                &#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>                    e.printStackTrace();<br>                &#125;<br>            &#125;<br>            <span class="hljs-keyword">if</span> (fis != <span class="hljs-literal">null</span>) &#123;<br>                <span class="hljs-keyword">try</span> &#123;<br>                    fis.close();<br>                &#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>                    e.printStackTrace();<br>                &#125;<br>            &#125;<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<h3 id="java-io-FileReader"><a href="#java-io-FileReader" class="headerlink" title="java.io.FileReader"></a>java.io.FileReader</h3><p>文件字符输入流，只能读取普通文本。<br>读取文本内容时，比较方便，快捷。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.io.FileNotFoundException;<br><span class="hljs-keyword">import</span> java.io.FileReader;<br><span class="hljs-keyword">import</span> java.io.IOException;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">FileReaderTest</span> &#123;<br>	<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>		<span class="hljs-type">FileReader</span> <span class="hljs-variable">reader</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>		<span class="hljs-keyword">try</span> &#123;<br>			<span class="hljs-comment">// 创建文件字符输入流</span><br>			reader = <span class="hljs-keyword">new</span> <span class="hljs-title class_">FileReader</span>(<span class="hljs-string">&quot;tempfile&quot;</span>);<br><br>			<span class="hljs-comment">//准备一个char数组</span><br>			<span class="hljs-type">char</span>[] chars = <span class="hljs-keyword">new</span> <span class="hljs-title class_">char</span>[<span class="hljs-number">4</span>];<br>			<span class="hljs-comment">// 往char数组中读</span><br>			reader.read(chars); <span class="hljs-comment">// 按照字符的方式读取：第一次e，第二次f，第三次 风....</span><br>			<span class="hljs-keyword">for</span>(<span class="hljs-type">char</span> c : chars) &#123;<br>				System.out.println(c);<br>			&#125;<br><br>            <span class="hljs-comment">/*// 开始读</span><br><span class="hljs-comment">            char[] chars = new char[4]; // 一次读取4个字符</span><br><span class="hljs-comment">            int readCount = 0;</span><br><span class="hljs-comment">            while((readCount = reader.read(chars)) != -1) &#123;</span><br><span class="hljs-comment">                System.out.print(new String(chars,0,readCount));</span><br><span class="hljs-comment">            &#125;*/</span><br>		&#125; <span class="hljs-keyword">catch</span> (FileNotFoundException e) &#123;<br>			e.printStackTrace();<br>		&#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>			e.printStackTrace();<br>		&#125; <span class="hljs-keyword">finally</span> &#123;<br>			<span class="hljs-keyword">if</span> (reader != <span class="hljs-literal">null</span>) &#123;<br>				<span class="hljs-keyword">try</span> &#123;<br>					reader.close();<br>				&#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>					e.printStackTrace();<br>				&#125;<br>			&#125;<br>		&#125;<br>	&#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<h3 id="java-io-FileWriter"><a href="#java-io-FileWriter" class="headerlink" title="java.io.FileWriter"></a>java.io.FileWriter</h3><p>文件字符输出流。写。<br>只能输出普通文本。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.io.FileWriter;<br><span class="hljs-keyword">import</span> java.io.IOException;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">FileWriterTest</span> &#123;<br>	<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>		<span class="hljs-type">FileWriter</span> <span class="hljs-variable">out</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>		<span class="hljs-keyword">try</span> &#123;<br>			<span class="hljs-comment">// 创建文件字符输出流对象</span><br>			<span class="hljs-comment">//out = new FileWriter(&quot;file&quot;);</span><br>			out = <span class="hljs-keyword">new</span> <span class="hljs-title class_">FileWriter</span>(<span class="hljs-string">&quot;file&quot;</span>, <span class="hljs-literal">true</span>);<br><br>			<span class="hljs-comment">// 开始写。</span><br>			<span class="hljs-type">char</span>[] chars = &#123;<span class="hljs-string">&#x27;我&#x27;</span>,<span class="hljs-string">&#x27;是&#x27;</span>,<span class="hljs-string">&#x27;中&#x27;</span>,<span class="hljs-string">&#x27;国&#x27;</span>,<span class="hljs-string">&#x27;人&#x27;</span>&#125;;<br>			out.write(chars);<br>			out.write(chars, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>);<br><br>			out.write(<span class="hljs-string">&quot;我是一名java软件工程师！&quot;</span>);<br>			<span class="hljs-comment">// 写出一个换行符。</span><br>			out.write(<span class="hljs-string">&quot;\n&quot;</span>);<br>			out.write(<span class="hljs-string">&quot;hello world!&quot;</span>);<br><br>			<span class="hljs-comment">// 刷新</span><br>			out.flush();<br>		&#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>			e.printStackTrace();<br>		&#125; <span class="hljs-keyword">finally</span> &#123;<br>			<span class="hljs-keyword">if</span> (out != <span class="hljs-literal">null</span>) &#123;<br>				<span class="hljs-keyword">try</span> &#123;<br>					out.close();<br>				&#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>					e.printStackTrace();<br>				&#125;<br>			&#125;<br>		&#125;<br>	&#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.io.FileNotFoundException;<br><span class="hljs-keyword">import</span> java.io.FileReader;<br><span class="hljs-keyword">import</span> java.io.FileWriter;<br><span class="hljs-keyword">import</span> java.io.IOException;<br><br><span class="hljs-comment">/*</span><br><span class="hljs-comment">使用FileReader FileWriter进行拷贝的话，只能拷贝“普通文本”文件。</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Copy02</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-type">FileReader</span> <span class="hljs-variable">in</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>        <span class="hljs-type">FileWriter</span> <span class="hljs-variable">out</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>        <span class="hljs-keyword">try</span> &#123;<br>            <span class="hljs-comment">// 读</span><br>            in = <span class="hljs-keyword">new</span> <span class="hljs-title class_">FileReader</span>(<span class="hljs-string">&quot;chapter23/src/com/bjpowernode/java/io/Copy02.java&quot;</span>);<br>            <span class="hljs-comment">// 写</span><br>            out = <span class="hljs-keyword">new</span> <span class="hljs-title class_">FileWriter</span>(<span class="hljs-string">&quot;Copy02.java&quot;</span>);<br><br>            <span class="hljs-comment">// 一边读一边写：</span><br>            <span class="hljs-type">char</span>[] chars = <span class="hljs-keyword">new</span> <span class="hljs-title class_">char</span>[<span class="hljs-number">1024</span> * <span class="hljs-number">512</span>]; <span class="hljs-comment">// 1MB</span><br>            <span class="hljs-type">int</span> <span class="hljs-variable">readCount</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>            <span class="hljs-keyword">while</span>((readCount = in.read(chars)) != -<span class="hljs-number">1</span>)&#123;<br>                out.write(chars, <span class="hljs-number">0</span>, readCount);<br>            &#125;<br><br>            <span class="hljs-comment">// 刷新</span><br>            out.flush();<br>        &#125; <span class="hljs-keyword">catch</span> (FileNotFoundException e) &#123;<br>            e.printStackTrace();<br>        &#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>            e.printStackTrace();<br>        &#125; <span class="hljs-keyword">finally</span> &#123;<br>            <span class="hljs-keyword">if</span> (in != <span class="hljs-literal">null</span>) &#123;<br>                <span class="hljs-keyword">try</span> &#123;<br>                    in.close();<br>                &#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>                    e.printStackTrace();<br>                &#125;<br>            &#125;<br>            <span class="hljs-keyword">if</span> (out != <span class="hljs-literal">null</span>) &#123;<br>                <span class="hljs-keyword">try</span> &#123;<br>                    out.close();<br>                &#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>                    e.printStackTrace();<br>                &#125;<br>            &#125;<br>        &#125;<br><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<h3 id="java-io-BufferedReader"><a href="#java-io-BufferedReader" class="headerlink" title="java.io.BufferedReader"></a>java.io.BufferedReader</h3><p>带有缓冲区的字符输入流。<br>使用这个流的时候不需要自定义char数组，或者说不需要自定义byte数组。自带缓冲。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.io.BufferedReader;<br><span class="hljs-keyword">import</span> java.io.FileReader;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BufferedReaderTest01</span> &#123;<br>	<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> Exception&#123;<br><br>		<span class="hljs-type">FileReader</span> <span class="hljs-variable">reader</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">FileReader</span>(<span class="hljs-string">&quot;Copy02.java&quot;</span>);<br>		<span class="hljs-comment">// 当一个流的构造方法中需要一个流的时候，这个被传进来的流叫做：节点流。</span><br>		<span class="hljs-comment">// 外部负责包装的这个流，叫做：包装流，还有一个名字叫做：处理流。</span><br>		<span class="hljs-comment">// 像当前这个程序来说：FileReader就是一个节点流。BufferedReader就是包装流/处理流。</span><br>		<span class="hljs-type">BufferedReader</span> <span class="hljs-variable">br</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BufferedReader</span>(reader);<br><br>		<span class="hljs-comment">// 读一行</span><br>        <span class="hljs-comment">/*String firstLine = br.readLine();</span><br><span class="hljs-comment">        System.out.println(firstLine);</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">        String secondLine = br.readLine();</span><br><span class="hljs-comment">        System.out.println(secondLine);</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">        String line3 = br.readLine();</span><br><span class="hljs-comment">        System.out.println(line3);*/</span><br><br>		<span class="hljs-comment">// br.readLine()方法读取一个文本行，但不带换行符。</span><br>		<span class="hljs-type">String</span> <span class="hljs-variable">s</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>		<span class="hljs-keyword">while</span>((s = br.readLine()) != <span class="hljs-literal">null</span>)&#123;<br>			System.out.print(s);<br>		&#125;<br><br>		<span class="hljs-comment">// 关闭流</span><br>		<span class="hljs-comment">// 对于包装流来说，只需要关闭最外层流就行，里面的节点流会自动关闭。（可以看源代码。）</span><br>		br.close();<br>	&#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<h3 id="java-io-InputStreamReader"><a href="#java-io-InputStreamReader" class="headerlink" title="java.io.InputStreamReader"></a>java.io.InputStreamReader</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.io.BufferedReader;<br><span class="hljs-keyword">import</span> java.io.FileInputStream;<br><span class="hljs-keyword">import</span> java.io.InputStream;<br><span class="hljs-keyword">import</span> java.io.InputStreamReader;<br><br><span class="hljs-comment">/*</span><br><span class="hljs-comment">    转换流：InputStreamReader</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BufferedReaderTest02</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> Exception&#123;<br><br>        <span class="hljs-comment">/*// 字节流</span><br><span class="hljs-comment">        FileInputStream in = new FileInputStream(&quot;Copy02.java&quot;);</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">        // 通过转换流转换（InputStreamReader将字节流转换成字符流。）</span><br><span class="hljs-comment">        // in是节点流。reader是包装流。</span><br><span class="hljs-comment">        InputStreamReader reader = new InputStreamReader(in);</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">        // 这个构造方法只能传一个字符流。不能传字节流。</span><br><span class="hljs-comment">        // reader是节点流。br是包装流。</span><br><span class="hljs-comment">        BufferedReader br = new BufferedReader(reader);*/</span><br><br>        <span class="hljs-comment">// 合并</span><br>        <span class="hljs-type">BufferedReader</span> <span class="hljs-variable">br</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BufferedReader</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">InputStreamReader</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">FileInputStream</span>(<span class="hljs-string">&quot;Copy02.java&quot;</span>)));<br><br>        <span class="hljs-type">String</span> <span class="hljs-variable">line</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>        <span class="hljs-keyword">while</span>((line = br.readLine()) != <span class="hljs-literal">null</span>)&#123;<br>            System.out.println(line);<br>        &#125;<br><br>        <span class="hljs-comment">// 关闭最外层</span><br>        br.close();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<h3 id="java-io-BufferedWriter"><a href="#java-io-BufferedWriter" class="headerlink" title="java.io.BufferedWriter"></a>java.io.BufferedWriter</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.io.BufferedWriter;<br><span class="hljs-keyword">import</span> java.io.FileOutputStream;<br><span class="hljs-keyword">import</span> java.io.FileWriter;<br><span class="hljs-keyword">import</span> java.io.OutputStreamWriter;<br><br><span class="hljs-comment">/*</span><br><span class="hljs-comment">BufferedWriter：带有缓冲的字符输出流。</span><br><span class="hljs-comment">OutputStreamWriter：转换流</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">BufferedWriterTest</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> Exception&#123;<br>        <span class="hljs-comment">// 带有缓冲区的字符输出流</span><br>        <span class="hljs-comment">//BufferedWriter out = new BufferedWriter(new FileWriter(&quot;copy&quot;));</span><br><br>        <span class="hljs-type">BufferedWriter</span> <span class="hljs-variable">out</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">BufferedWriter</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">OutputStreamWriter</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">FileOutputStream</span>(<span class="hljs-string">&quot;copy&quot;</span>, <span class="hljs-literal">true</span>)));<br>        <span class="hljs-comment">// 开始写。</span><br>        out.write(<span class="hljs-string">&quot;hello world!&quot;</span>);<br>        out.write(<span class="hljs-string">&quot;\n&quot;</span>);<br>        out.write(<span class="hljs-string">&quot;hello kitty!&quot;</span>);<br>        <span class="hljs-comment">// 刷新</span><br>        out.flush();<br>        <span class="hljs-comment">// 关闭最外层</span><br>        out.close();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<h3 id="java-io-DataOutputStream"><a href="#java-io-DataOutputStream" class="headerlink" title="java.io.DataOutputStream"></a>java.io.DataOutputStream</h3><p>java.io.DataOutputStream：数据专属的流。<br>这个流可以将数据连同数据的类型一并写入文件。<br>注意：这个文件不是普通文本文档。（这个文件使用记事本打不开。）</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.io.DataOutputStream;<br><span class="hljs-keyword">import</span> java.io.FileOutputStream;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DataOutputStreamTest</span> &#123;<br>	<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> Exception&#123;<br>		<span class="hljs-comment">// 创建数据专属的字节输出流</span><br>		<span class="hljs-type">DataOutputStream</span> <span class="hljs-variable">dos</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DataOutputStream</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">FileOutputStream</span>(<span class="hljs-string">&quot;data&quot;</span>));<br>		<span class="hljs-comment">// 写数据</span><br>		<span class="hljs-type">byte</span> <span class="hljs-variable">b</span> <span class="hljs-operator">=</span> <span class="hljs-number">100</span>;<br>		<span class="hljs-type">short</span> <span class="hljs-variable">s</span> <span class="hljs-operator">=</span> <span class="hljs-number">200</span>;<br>		<span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> <span class="hljs-number">300</span>;<br>		<span class="hljs-type">long</span> <span class="hljs-variable">l</span> <span class="hljs-operator">=</span> <span class="hljs-number">400L</span>;<br>		<span class="hljs-type">float</span> <span class="hljs-variable">f</span> <span class="hljs-operator">=</span> <span class="hljs-number">3.0F</span>;<br>		<span class="hljs-type">double</span> <span class="hljs-variable">d</span> <span class="hljs-operator">=</span> <span class="hljs-number">3.14</span>;<br>		<span class="hljs-type">boolean</span> <span class="hljs-variable">sex</span> <span class="hljs-operator">=</span> <span class="hljs-literal">false</span>;<br>		<span class="hljs-type">char</span> <span class="hljs-variable">c</span> <span class="hljs-operator">=</span> <span class="hljs-string">&#x27;a&#x27;</span>;<br>		<span class="hljs-comment">// 写</span><br>		dos.writeByte(b); <span class="hljs-comment">// 把数据以及数据的类型一并写入到文件当中。</span><br>		dos.writeShort(s);<br>		dos.writeInt(i);<br>		dos.writeLong(l);<br>		dos.writeFloat(f);<br>		dos.writeDouble(d);<br>		dos.writeBoolean(sex);<br>		dos.writeChar(c);<br><br>		<span class="hljs-comment">// 刷新</span><br>		dos.flush();<br>		<span class="hljs-comment">// 关闭最外层</span><br>		dos.close();<br>	&#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<h3 id="java-io-DataInputStream"><a href="#java-io-DataInputStream" class="headerlink" title="java.io.DataInputStream"></a>java.io.DataInputStream</h3><p>DataInputStream:数据字节输入流。<br>DataOutputStream写的文件，只能使用DataInputStream去读。并且读的时候你需要提前知道写入的顺序。<br>读的顺序需要和写的顺序一致。才可以正常取出数据。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.io.DataInputStream;<br><span class="hljs-keyword">import</span> java.io.FileInputStream;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">DataInputStreamTest01</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> Exception&#123;<br>        <span class="hljs-type">DataInputStream</span> <span class="hljs-variable">dis</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">DataInputStream</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">FileInputStream</span>(<span class="hljs-string">&quot;data&quot;</span>));<br>        <span class="hljs-comment">// 开始读</span><br>        <span class="hljs-type">byte</span> <span class="hljs-variable">b</span> <span class="hljs-operator">=</span> dis.readByte();<br>        <span class="hljs-type">short</span> <span class="hljs-variable">s</span> <span class="hljs-operator">=</span> dis.readShort();<br>        <span class="hljs-type">int</span> <span class="hljs-variable">i</span> <span class="hljs-operator">=</span> dis.readInt();<br>        <span class="hljs-type">long</span> <span class="hljs-variable">l</span> <span class="hljs-operator">=</span> dis.readLong();<br>        <span class="hljs-type">float</span> <span class="hljs-variable">f</span> <span class="hljs-operator">=</span> dis.readFloat();<br>        <span class="hljs-type">double</span> <span class="hljs-variable">d</span> <span class="hljs-operator">=</span> dis.readDouble();<br>        <span class="hljs-type">boolean</span> <span class="hljs-variable">sex</span> <span class="hljs-operator">=</span> dis.readBoolean();<br>        <span class="hljs-type">char</span> <span class="hljs-variable">c</span> <span class="hljs-operator">=</span> dis.readChar();<br><br>        System.out.println(b);<br>        System.out.println(s);<br>        System.out.println(i + <span class="hljs-number">1000</span>);<br>        System.out.println(l);<br>        System.out.println(f);<br>        System.out.println(d);<br>        System.out.println(sex);<br>        System.out.println(c);<br><br>        dis.close();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>


<h3 id="java-io-PrintStream"><a href="#java-io-PrintStream" class="headerlink" title="java.io.PrintStream"></a>java.io.PrintStream</h3><p>java.io.PrintStream：标准的字节输出流。默认输出到控制台。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.io.FileOutputStream;<br><span class="hljs-keyword">import</span> java.io.PrintStream;<br><br><span class="hljs-comment">/*</span><br><span class="hljs-comment">java.io.PrintStream：标准的字节输出流。默认输出到控制台。</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">PrintStreamTest</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> Exception&#123;<br><br>        <span class="hljs-comment">// 联合起来写</span><br>        System.out.println(<span class="hljs-string">&quot;hello world!&quot;</span>);<br><br>        <span class="hljs-comment">// 分开写</span><br>        <span class="hljs-type">PrintStream</span> <span class="hljs-variable">ps</span> <span class="hljs-operator">=</span> System.out;<br>        ps.println(<span class="hljs-string">&quot;hello zhangsan&quot;</span>);<br>        ps.println(<span class="hljs-string">&quot;hello lisi&quot;</span>);<br>        ps.println(<span class="hljs-string">&quot;hello wangwu&quot;</span>);<br><br>        <span class="hljs-comment">// 标准输出流不需要手动close()关闭。</span><br>        <span class="hljs-comment">// 可以改变标准输出流的输出方向吗？ 可以</span><br>        <span class="hljs-comment">/*</span><br><span class="hljs-comment">        // 这些是之前System类使用过的方法和属性。</span><br><span class="hljs-comment">        System.gc();</span><br><span class="hljs-comment">        System.currentTimeMillis();</span><br><span class="hljs-comment">        PrintStream ps2 = System.out;</span><br><span class="hljs-comment">        System.exit(0);</span><br><span class="hljs-comment">        System.arraycopy(....);</span><br><span class="hljs-comment">         */</span><br><br>        <span class="hljs-comment">// 标准输出流不再指向控制台，指向“log”文件。</span><br>        <span class="hljs-type">PrintStream</span> <span class="hljs-variable">printStream</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">PrintStream</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">FileOutputStream</span>(<span class="hljs-string">&quot;log&quot;</span>));<br>        <span class="hljs-comment">// 修改输出方向，将输出方向修改到&quot;log&quot;文件。</span><br>        System.setOut(printStream);<br>        <span class="hljs-comment">// 再输出</span><br>        System.out.println(<span class="hljs-string">&quot;hello world&quot;</span>);<br>        System.out.println(<span class="hljs-string">&quot;hello kitty&quot;</span>);<br>        System.out.println(<span class="hljs-string">&quot;hello zhangsan&quot;</span>);<br><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>利用标准输出流编写日志工具：<br>Logger.java:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.io.FileNotFoundException;<br><span class="hljs-keyword">import</span> java.io.FileOutputStream;<br><span class="hljs-keyword">import</span> java.io.PrintStream;<br><span class="hljs-keyword">import</span> java.text.SimpleDateFormat;<br><span class="hljs-keyword">import</span> java.util.Date;<br><br><span class="hljs-comment">/*</span><br><span class="hljs-comment">日志工具</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Logger</span> &#123;<br>    <span class="hljs-comment">/*</span><br><span class="hljs-comment">    记录日志的方法。</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">log</span><span class="hljs-params">(String msg)</span> &#123;<br>        <span class="hljs-keyword">try</span> &#123;<br>            <span class="hljs-comment">// 指向一个日志文件</span><br>            <span class="hljs-type">PrintStream</span> <span class="hljs-variable">out</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">PrintStream</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">FileOutputStream</span>(<span class="hljs-string">&quot;log.txt&quot;</span>, <span class="hljs-literal">true</span>));<br>            <span class="hljs-comment">// 改变输出方向</span><br>            System.setOut(out);<br>            <span class="hljs-comment">// 日期当前时间</span><br>            <span class="hljs-type">Date</span> <span class="hljs-variable">nowTime</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>();<br>            <span class="hljs-type">SimpleDateFormat</span> <span class="hljs-variable">sdf</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SimpleDateFormat</span>(<span class="hljs-string">&quot;yyyy-MM-dd HH:mm:ss SSS&quot;</span>);<br>            <span class="hljs-type">String</span> <span class="hljs-variable">strTime</span> <span class="hljs-operator">=</span> sdf.format(nowTime);<br><br>            System.out.println(strTime + <span class="hljs-string">&quot;: &quot;</span> + msg);<br>        &#125; <span class="hljs-keyword">catch</span> (FileNotFoundException e) &#123;<br>            e.printStackTrace();<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>LogTest.java：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">LogTest</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">//测试工具类是否好用</span><br>        Logger.log(<span class="hljs-string">&quot;调用了System类的gc()方法，建议启动垃圾回收&quot;</span>);<br>        Logger.log(<span class="hljs-string">&quot;调用了UserService的doSome()方法&quot;</span>);<br>        Logger.log(<span class="hljs-string">&quot;用户尝试进行登录，验证失败&quot;</span>);<br>        Logger.log(<span class="hljs-string">&quot;我非常喜欢这个记录日志的工具哦！&quot;</span>);<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<h2 id="File类"><a href="#File类" class="headerlink" title="File类"></a>File类</h2><p>1、File类和四大家族没有关系，所以File类不能完成文件的读和写。<br>2、File对象代表什么？<br>文件和目录路径名的抽象表示形式。<br>C:\Drivers 这是一个File对象<br>C:\Drivers\Lan\Realtek\Readme.txt 也是File对象。<br>一个File对象有可能对应的是目录，也可能是文件。<br>File只是一个路径名的抽象表示形式。<br>3、需要掌握File类中常用的方法</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.io.File;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">FileTest01</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> Exception &#123;<br>        <span class="hljs-comment">// 创建一个File对象</span><br>        <span class="hljs-type">File</span> <span class="hljs-variable">f1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>(<span class="hljs-string">&quot;D:\\file&quot;</span>);<br><br>        <span class="hljs-comment">// 判断是否存在！</span><br>        System.out.println(f1.exists());<br><br>        <span class="hljs-comment">// 如果D:\file不存在，则以文件的形式创建出来</span><br>        <span class="hljs-comment">/*if(!f1.exists()) &#123;</span><br><span class="hljs-comment">            // 以文件形式新建</span><br><span class="hljs-comment">            f1.createNewFile();</span><br><span class="hljs-comment">        &#125;*/</span><br><br>        <span class="hljs-comment">// 如果D:\file不存在，则以目录的形式创建出来</span><br>        <span class="hljs-comment">/*if(!f1.exists()) &#123;</span><br><span class="hljs-comment">            // 以目录的形式新建。</span><br><span class="hljs-comment">            f1.mkdir();</span><br><span class="hljs-comment">        &#125;*/</span><br><br>        <span class="hljs-comment">// 可以创建多重目录吗？</span><br>        <span class="hljs-type">File</span> <span class="hljs-variable">f2</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>(<span class="hljs-string">&quot;D:/a/b/c/d/e/f&quot;</span>);<br>        <span class="hljs-comment">/*if(!f2.exists()) &#123;</span><br><span class="hljs-comment">            // 多重目录的形式新建。</span><br><span class="hljs-comment">            f2.mkdirs();</span><br><span class="hljs-comment">        &#125;*/</span><br><br>        <span class="hljs-type">File</span> <span class="hljs-variable">f3</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>(<span class="hljs-string">&quot;D:\\course\\01-开课\\学习方法.txt&quot;</span>);<br>        <span class="hljs-comment">// 获取文件的父路径</span><br>        <span class="hljs-type">String</span> <span class="hljs-variable">parentPath</span> <span class="hljs-operator">=</span> f3.getParent();<br>        System.out.println(parentPath); <span class="hljs-comment">//D:\course\01-开课</span><br>        <span class="hljs-type">File</span> <span class="hljs-variable">parentFile</span> <span class="hljs-operator">=</span> f3.getParentFile();<br>        System.out.println(<span class="hljs-string">&quot;获取绝对路径：&quot;</span> + parentFile.getAbsolutePath());<br><br>        <span class="hljs-type">File</span> <span class="hljs-variable">f4</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>(<span class="hljs-string">&quot;copy&quot;</span>);<br>        System.out.println(<span class="hljs-string">&quot;绝对路径：&quot;</span> + f4.getAbsolutePath()); <span class="hljs-comment">// C:\Users\Administrator\IdeaProjects\javase\copy</span><br><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.io.File;<br><span class="hljs-keyword">import</span> java.text.SimpleDateFormat;<br><span class="hljs-keyword">import</span> java.util.Date;<br><br><span class="hljs-comment">/*</span><br><span class="hljs-comment">File类的常用方法</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">FileTest02</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br><br>        <span class="hljs-type">File</span> <span class="hljs-variable">f1</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>(<span class="hljs-string">&quot;D:\\course\\01-开课\\开学典礼.ppt&quot;</span>);<br>        <span class="hljs-comment">// 获取文件名</span><br>        System.out.println(<span class="hljs-string">&quot;文件名：&quot;</span> + f1.getName());<br><br>        <span class="hljs-comment">// 判断是否是一个目录</span><br>        System.out.println(f1.isDirectory()); <span class="hljs-comment">// false</span><br><br>        <span class="hljs-comment">// 判断是否是一个文件</span><br>        System.out.println(f1.isFile()); <span class="hljs-comment">// true</span><br><br>        <span class="hljs-comment">// 获取文件最后一次修改时间</span><br>        <span class="hljs-type">long</span> <span class="hljs-variable">haoMiao</span> <span class="hljs-operator">=</span> f1.lastModified(); <span class="hljs-comment">// 这个毫秒是从1970年到现在的总毫秒数。</span><br>        <span class="hljs-comment">// 将总毫秒数转换成日期?????</span><br>        <span class="hljs-type">Date</span> <span class="hljs-variable">time</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>(haoMiao);<br>        <span class="hljs-type">SimpleDateFormat</span> <span class="hljs-variable">sdf</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">SimpleDateFormat</span>(<span class="hljs-string">&quot;yyyy-MM-dd HH:mm:ss SSS&quot;</span>);<br>        <span class="hljs-type">String</span> <span class="hljs-variable">strTime</span> <span class="hljs-operator">=</span> sdf.format(time);<br>        System.out.println(strTime);<br><br>        <span class="hljs-comment">// 获取文件大小</span><br>        System.out.println(f1.length()); <span class="hljs-comment">//216064字节。</span><br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.io.File;<br><br><span class="hljs-comment">/*</span><br><span class="hljs-comment">File中的listFiles方法。</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">FileTest03</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">// File[] listFiles()</span><br>        <span class="hljs-comment">// 获取当前目录下所有的子文件。</span><br>        <span class="hljs-type">File</span> <span class="hljs-variable">f</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>(<span class="hljs-string">&quot;D:\\course\\01-开课&quot;</span>);<br>        File[] files = f.listFiles();<br>        <span class="hljs-comment">// foreach</span><br>        <span class="hljs-keyword">for</span>(File file : files)&#123;<br>            <span class="hljs-comment">//System.out.println(file.getAbsolutePath());</span><br>            System.out.println(file.getName());<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<h3 id="拷贝目录"><a href="#拷贝目录" class="headerlink" title="拷贝目录"></a>拷贝目录</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.io.*;<br><br><span class="hljs-comment">/*</span><br><span class="hljs-comment">拷贝目录</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">CopyAll</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> &#123;<br>        <span class="hljs-comment">// 拷贝源</span><br>        <span class="hljs-type">File</span> <span class="hljs-variable">srcFile</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>(<span class="hljs-string">&quot;D:\\course\\02-JavaSE\\document&quot;</span>);<br>        <span class="hljs-comment">// 拷贝目标</span><br>        <span class="hljs-type">File</span> <span class="hljs-variable">destFile</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>(<span class="hljs-string">&quot;C:\\a\\b\\c&quot;</span>);<br>        <span class="hljs-comment">// 调用方法拷贝</span><br>        copyDir(srcFile, destFile);<br>    &#125;<br><br>    <span class="hljs-comment">/**</span><br><span class="hljs-comment">     * 拷贝目录</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> srcFile 拷贝源</span><br><span class="hljs-comment">     * <span class="hljs-doctag">@param</span> destFile 拷贝目标</span><br><span class="hljs-comment">     */</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">copyDir</span><span class="hljs-params">(File srcFile, File destFile)</span> &#123;<br>        <span class="hljs-keyword">if</span>(srcFile.isFile()) &#123;<br>            <span class="hljs-comment">// srcFile如果是一个文件的话，递归结束。</span><br>            <span class="hljs-comment">// 是文件的时候需要拷贝。</span><br>            <span class="hljs-comment">// ....一边读一边写。</span><br>            <span class="hljs-type">FileInputStream</span> <span class="hljs-variable">in</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>            <span class="hljs-type">FileOutputStream</span> <span class="hljs-variable">out</span> <span class="hljs-operator">=</span> <span class="hljs-literal">null</span>;<br>            <span class="hljs-keyword">try</span> &#123;<br>                <span class="hljs-comment">// 读这个文件</span><br>                <span class="hljs-comment">// D:\course\02-JavaSE\document\JavaSE进阶讲义\JavaSE进阶-01-面向对象.pdf</span><br>                in = <span class="hljs-keyword">new</span> <span class="hljs-title class_">FileInputStream</span>(srcFile);<br>                <span class="hljs-comment">// 写到这个文件中</span><br>                <span class="hljs-comment">// C:\course\02-JavaSE\document\JavaSE进阶讲义\JavaSE进阶-01-面向对象.pdf</span><br>                <span class="hljs-type">String</span> <span class="hljs-variable">path</span> <span class="hljs-operator">=</span> (destFile.getAbsolutePath().endsWith(<span class="hljs-string">&quot;\\&quot;</span>) ? destFile.getAbsolutePath() : destFile.getAbsolutePath() + <span class="hljs-string">&quot;\\&quot;</span>)  + srcFile.getAbsolutePath().substring(<span class="hljs-number">3</span>);<br>                out = <span class="hljs-keyword">new</span> <span class="hljs-title class_">FileOutputStream</span>(path);<br>                <span class="hljs-comment">// 一边读一边写</span><br>                <span class="hljs-type">byte</span>[] bytes = <span class="hljs-keyword">new</span> <span class="hljs-title class_">byte</span>[<span class="hljs-number">1024</span> * <span class="hljs-number">1024</span>]; <span class="hljs-comment">// 一次复制1MB</span><br>                <span class="hljs-type">int</span> <span class="hljs-variable">readCount</span> <span class="hljs-operator">=</span> <span class="hljs-number">0</span>;<br>                <span class="hljs-keyword">while</span>((readCount = in.read(bytes)) != -<span class="hljs-number">1</span>)&#123;<br>                    out.write(bytes, <span class="hljs-number">0</span>, readCount);<br>                &#125;<br>                out.flush();<br>            &#125; <span class="hljs-keyword">catch</span> (FileNotFoundException e) &#123;<br>                e.printStackTrace();<br>            &#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>                e.printStackTrace();<br>            &#125; <span class="hljs-keyword">finally</span> &#123;<br>                <span class="hljs-keyword">if</span> (out != <span class="hljs-literal">null</span>) &#123;<br>                    <span class="hljs-keyword">try</span> &#123;<br>                        out.close();<br>                    &#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>                        e.printStackTrace();<br>                    &#125;<br>                &#125;<br>                <span class="hljs-keyword">if</span> (in != <span class="hljs-literal">null</span>) &#123;<br>                    <span class="hljs-keyword">try</span> &#123;<br>                        in.close();<br>                    &#125; <span class="hljs-keyword">catch</span> (IOException e) &#123;<br>                        e.printStackTrace();<br>                    &#125;<br>                &#125;<br>            &#125;<br>            <span class="hljs-keyword">return</span>;<br>        &#125;<br>        <span class="hljs-comment">// 获取源下面的子目录</span><br>        File[] files = srcFile.listFiles();<br>        <span class="hljs-keyword">for</span>(File file : files)&#123;<br>            <span class="hljs-comment">// 获取所有文件的（包括目录和文件）绝对路径</span><br>            <span class="hljs-comment">//System.out.println(file.getAbsolutePath());</span><br>            <span class="hljs-keyword">if</span>(file.isDirectory())&#123;<br>                <span class="hljs-comment">// 新建对应的目录</span><br>                <span class="hljs-comment">//System.out.println(file.getAbsolutePath());</span><br>                <span class="hljs-comment">//D:\course\02-JavaSE\document\JavaSE进阶讲义       源目录</span><br>                <span class="hljs-comment">//C:\course\02-JavaSE\document\JavaSE进阶讲义       目标目录</span><br>                <span class="hljs-type">String</span> <span class="hljs-variable">srcDir</span> <span class="hljs-operator">=</span> file.getAbsolutePath();<br>                <span class="hljs-type">String</span> <span class="hljs-variable">destDir</span> <span class="hljs-operator">=</span> (destFile.getAbsolutePath().endsWith(<span class="hljs-string">&quot;\\&quot;</span>) ? destFile.getAbsolutePath() : destFile.getAbsolutePath() + <span class="hljs-string">&quot;\\&quot;</span>)  + srcDir.substring(<span class="hljs-number">3</span>);<br>                <span class="hljs-type">File</span> <span class="hljs-variable">newFile</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">File</span>(destDir);<br>                <span class="hljs-keyword">if</span>(!newFile.exists())&#123;<br>                    newFile.mkdirs();<br>                &#125;<br>            &#125;<br>            <span class="hljs-comment">// 递归调用</span><br>            copyDir(file, destFile);<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<h2 id="序列化与反序列化"><a href="#序列化与反序列化" class="headerlink" title="序列化与反序列化"></a>序列化与反序列化</h2><p><img src="https://blog-1311748085.cos.ap-beijing.myqcloud.com/img/003-%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%BA%8F%E5%88%97%E5%8C%96%E5%92%8C%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96.png"></p>
<h3 id="序列化"><a href="#序列化" class="headerlink" title="序列化"></a>序列化</h3><p>1、java.io.NotSerializableException:<br>Student对象不支持序列化！！！！</p>
<p>2、<strong>参与序列化和反序列化的对象，必须实现Serializable接口。</strong></p>
<p>3、注意：通过源代码发现，<strong>Serializable接口只是一个标志接口</strong>：<br>public interface Serializable {<br>}<br>这个接口当中什么代码都没有。<br>那么它起到一个什么作用呢？<br>起到标识的作用，标志的作用，java虚拟机看到这个类实现了这个接口，可能会对这个类进行特殊待遇。<br>Serializable这个标志接口是给java虚拟机参考的，java虚拟机看到这个接口之后，会为该类自动生成<br>一个序列化版本号。</p>
<p>4、序列化版本号有什么用呢？<br>java.io.InvalidClassException:<br>com.bjpowernode.java.bean.Student;<br>local class incompatible:<br>stream classdesc serialVersionUID &#x3D; -684255398724514298（十年后）,<br>local class serialVersionUID &#x3D; -3463447116624555755（十年前）  </p>
<p>java语言中是采用什么机制来区分类的？<br>        第一：首先通过类名进行比对，如果类名不一样，肯定不是同一个类。<br>        第二：如果类名一样，再怎么进行类的区别？靠序列化版本号进行区分。  </p>
<p>小鹏编写了一个类：com.bjpowernode.java.bean.Student implements Serializable<br>    胡浪编写了一个类：com.bjpowernode.java.bean.Student implements Serializable<br>    不同的人编写了同一个类，但“这两个类确实不是同一个类”。这个时候序列化版本就起上作用了。<br>    对于java虚拟机来说，java虚拟机是可以区分开这两个类的，因为这两个类都实现了Serializable接口，<br>    都有默认的序列化版本号，他们的序列化版本号不一样。所以区分开了。（这是自动生成序列化版本号的好处）</p>
<p>请思考？<br>        这种自动生成序列化版本号有什么缺陷？<br>            这种自动生成的序列化版本号缺点是：一旦代码确定之后，不能进行后续的修改，<br>            因为只要修改，必然会重新编译，此时会生成全新的序列化版本号，这个时候java<br>            虚拟机会认为这是一个全新的类。（这样就不好了！）</p>
<p> 最终结论：<br>        凡是一个类实现了Serializable接口，建议给该类提供一个固定不变的序列化版本号。<br>        这样，以后这个类即使代码修改了，但是版本号不变，java虚拟机会认为是同一个类。</p>
<p>重点：<br><strong>参与序列化的类型必须实现java.io.Serializable接口。</strong><br><strong>并且建议将序列化版本号手动的写出来。</strong><br><strong>private static final long serialVersionUID &#x3D; 1L;</strong>  </p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.io.Serializable;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">Student</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Serializable</span> &#123;<br><br>    <span class="hljs-comment">// IDEA工具自动生成序列化版本号。</span><br>    <span class="hljs-comment">//private static final long serialVersionUID = -7998917368642754840L;</span><br><br>    <span class="hljs-comment">// Java虚拟机看到Serializable接口之后，会自动生成一个序列化版本号。</span><br>    <span class="hljs-comment">// 这里没有手动写出来，java虚拟机会默认提供这个序列化版本号。</span><br>    <span class="hljs-comment">// 建议将序列化版本号手动的写出来。不建议自动生成</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">final</span> <span class="hljs-type">long</span> <span class="hljs-variable">serialVersionUID</span> <span class="hljs-operator">=</span> <span class="hljs-number">1L</span>; <span class="hljs-comment">// java虚拟机识别一个类的时候先通过类名，如果类名一致，再通过序列化版本号。</span><br><br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> no;<br>    <span class="hljs-comment">//private String name;</span><br><br>    <span class="hljs-comment">// 过了很久，Student这个类源代码改动了。</span><br>    <span class="hljs-comment">// 源代码改动之后，需要重新编译，编译之后生成了全新的字节码文件。</span><br>    <span class="hljs-comment">// 并且class文件再次运行的时候，java虚拟机生成的序列化版本号也会发生相应的改变。</span><br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> age;<br>    <span class="hljs-keyword">private</span> String email;<br>    <span class="hljs-keyword">private</span> String address;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Student</span><span class="hljs-params">()</span> &#123;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">Student</span><span class="hljs-params">(<span class="hljs-type">int</span> no, String name)</span> &#123;<br>        <span class="hljs-built_in">this</span>.no = no;<br>        <span class="hljs-comment">//this.name = name;</span><br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getNo</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> no;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setNo</span><span class="hljs-params">(<span class="hljs-type">int</span> no)</span> &#123;<br>        <span class="hljs-built_in">this</span>.no = no;<br>    &#125;<br><br>    <span class="hljs-comment">/*public String getName() &#123;</span><br><span class="hljs-comment">        return name;</span><br><span class="hljs-comment">    &#125;*/</span><br><br>    <span class="hljs-comment">/*public void setName(String name) &#123;</span><br><span class="hljs-comment">        this.name = name;</span><br><span class="hljs-comment">    &#125;*/</span><br><br>    <span class="hljs-comment">/*@Override</span><br><span class="hljs-comment">    public String toString() &#123;</span><br><span class="hljs-comment">        return &quot;Student&#123;&quot; +</span><br><span class="hljs-comment">                &quot;no=&quot; + no +</span><br><span class="hljs-comment">                &quot;, name=&#x27;&quot; + name + &#x27;\&#x27;&#x27; +</span><br><span class="hljs-comment">                &#x27;&#125;&#x27;;</span><br><span class="hljs-comment">    &#125;*/</span><br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">toString</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;Student&#123;&quot;</span> +<br>                <span class="hljs-string">&quot;no=&quot;</span> + no +<br>                <span class="hljs-string">&quot;, age=&quot;</span> + age +<br>                <span class="hljs-string">&quot;, email=&#x27;&quot;</span> + email + <span class="hljs-string">&#x27;\&#x27;&#x27;</span> +<br>                <span class="hljs-string">&quot;, address=&#x27;&quot;</span> + address + <span class="hljs-string">&#x27;\&#x27;&#x27;</span> +<br>                <span class="hljs-string">&#x27;&#125;&#x27;</span>;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<h3 id="反序列化"><a href="#反序列化" class="headerlink" title="反序列化"></a>反序列化</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.io.FileInputStream;<br><span class="hljs-keyword">import</span> java.io.ObjectInputStream;<br><br><span class="hljs-comment">/*</span><br><span class="hljs-comment">反序列化</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ObjectInputStreamTest01</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> Exception&#123;<br>        <span class="hljs-type">ObjectInputStream</span> <span class="hljs-variable">ois</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ObjectInputStream</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">FileInputStream</span>(<span class="hljs-string">&quot;students&quot;</span>));<br>        <span class="hljs-comment">// 开始反序列化，读</span><br>        <span class="hljs-type">Object</span> <span class="hljs-variable">obj</span> <span class="hljs-operator">=</span> ois.readObject();<br>        <span class="hljs-comment">// 反序列化回来是一个学生对象，所以会调用学生对象的toString方法。</span><br>        System.out.println(obj);<br>        ois.close();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<h3 id="一次性序列化与反序列化多个对象"><a href="#一次性序列化与反序列化多个对象" class="headerlink" title="一次性序列化与反序列化多个对象"></a>一次性序列化与反序列化多个对象</h3><p><strong>transient关键字表示游离的，不参与序列化。</strong></p>
<p>User.java:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.io.Serializable;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">User</span> <span class="hljs-keyword">implements</span> <span class="hljs-title class_">Serializable</span> &#123;<br>    <span class="hljs-keyword">private</span> <span class="hljs-type">int</span> no;<br>    <br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">transient</span> String name; <span class="hljs-comment">// name不参与序列化操作！</span><br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">User</span><span class="hljs-params">()</span> &#123;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-title function_">User</span><span class="hljs-params">(<span class="hljs-type">int</span> no, String name)</span> &#123;<br>        <span class="hljs-built_in">this</span>.no = no;<br>        <span class="hljs-built_in">this</span>.name = name;<br>    &#125;<br><br>    <span class="hljs-meta">@Override</span><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">toString</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;User&#123;&quot;</span> +<br>                <span class="hljs-string">&quot;no=&quot;</span> + no +<br>                <span class="hljs-string">&quot;, name=&#x27;&quot;</span> + name + <span class="hljs-string">&#x27;\&#x27;&#x27;</span> +<br>                <span class="hljs-string">&#x27;&#125;&#x27;</span>;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-type">int</span> <span class="hljs-title function_">getNo</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> no;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setNo</span><span class="hljs-params">(<span class="hljs-type">int</span> no)</span> &#123;<br>        <span class="hljs-built_in">this</span>.no = no;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> String <span class="hljs-title function_">getName</span><span class="hljs-params">()</span> &#123;<br>        <span class="hljs-keyword">return</span> name;<br>    &#125;<br><br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">setName</span><span class="hljs-params">(String name)</span> &#123;<br>        <span class="hljs-built_in">this</span>.name = name;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>ObjectOutputStreamTest02.java:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.io.FileOutputStream;<br><span class="hljs-keyword">import</span> java.io.ObjectOutputStream;<br><span class="hljs-keyword">import</span> java.util.ArrayList;<br><span class="hljs-keyword">import</span> java.util.List;<br><br><span class="hljs-comment">/*</span><br><span class="hljs-comment">一次序列化多个对象呢？</span><br><span class="hljs-comment">    可以，可以将对象放到集合当中，序列化集合。</span><br><span class="hljs-comment">提示：</span><br><span class="hljs-comment">    参与序列化的ArrayList集合以及集合中的元素User都需要实现 java.io.Serializable接口。</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ObjectOutputStreamTest02</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> Exception&#123;<br>        List&lt;User&gt; userList = <span class="hljs-keyword">new</span> <span class="hljs-title class_">ArrayList</span>&lt;&gt;();<br>        userList.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>(<span class="hljs-number">1</span>,<span class="hljs-string">&quot;zhangsan&quot;</span>));<br>        userList.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>(<span class="hljs-number">2</span>, <span class="hljs-string">&quot;lisi&quot;</span>));<br>        userList.add(<span class="hljs-keyword">new</span> <span class="hljs-title class_">User</span>(<span class="hljs-number">3</span>, <span class="hljs-string">&quot;wangwu&quot;</span>));<br>        <span class="hljs-type">ObjectOutputStream</span> <span class="hljs-variable">oos</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ObjectOutputStream</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">FileOutputStream</span>(<span class="hljs-string">&quot;users&quot;</span>));<br><br>        <span class="hljs-comment">// 序列化一个集合，这个集合对象中放了很多其他对象。</span><br>        oos.writeObject(userList);<br><br>        oos.flush();<br>        oos.close();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p>ObjectInputStreamTest02.java:</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.io.FileInputStream;<br><span class="hljs-keyword">import</span> java.io.ObjectInputStream;<br><span class="hljs-keyword">import</span> java.util.List;<br><br><span class="hljs-comment">/*</span><br><span class="hljs-comment">反序列化集合</span><br><span class="hljs-comment"> */</span><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">ObjectInputStreamTest02</span> &#123;<br>    <span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> Exception&#123;<br>        <span class="hljs-type">ObjectInputStream</span> <span class="hljs-variable">ois</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">ObjectInputStream</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">FileInputStream</span>(<span class="hljs-string">&quot;users&quot;</span>));<br>        <span class="hljs-comment">//Object obj = ois.readObject();</span><br>        <span class="hljs-comment">//System.out.println(obj instanceof List);</span><br>        List&lt;User&gt; userList = (List&lt;User&gt;)ois.readObject();<br>        <span class="hljs-keyword">for</span>(User user : userList)&#123;<br>            System.out.println(user);<br>        &#125;<br>        ois.close();<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<h2 id="IO-Properties的联合应用"><a href="#IO-Properties的联合应用" class="headerlink" title="IO+Properties的联合应用"></a>IO+Properties的联合应用</h2><p>IO流：文件的读和写。<br>Properties:是一个Map集合，key和value都是String类型。</p>
<p>非常好的一个设计理念：<br>以后经常改变的数据，可以单独写到一个文件中，使用程序动态读取。<br>将来只需要修改这个文件的内容，java代码不需要改动，不需要重新编译，服务器也不需要重启。就可以拿到动态的信息。</p>
<p>类似于以上机制的这种文件被称为配置文件。<br>    并且当配置文件中的内容格式是：<br>        key1&#x3D;value<br>        key2&#x3D;value<br>    的时候，我们把这种配置文件叫做属性配置文件。  </p>
<p>java规范中有要求：属性配置文件建议以.properties结尾，但这不是必须的。<br>    这种以.properties结尾的文件在java中被称为：属性配置文件。<br>    其中Properties是专门存放属性配置文件内容的一个类。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> java.io.FileReader;<br><span class="hljs-keyword">import</span> java.util.Properties;<br><br><span class="hljs-keyword">public</span> <span class="hljs-keyword">class</span> <span class="hljs-title class_">IoPropertiesTest01</span> &#123;<br>	<span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title function_">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> Exception&#123;<br>        <span class="hljs-comment">/*</span><br><span class="hljs-comment">        Properties是一个Map集合，key和value都是String类型。</span><br><span class="hljs-comment">        想将userinfo文件中的数据加载到Properties对象当中。</span><br><span class="hljs-comment">         */</span><br>		<span class="hljs-comment">// 新建一个输入流对象</span><br>		<span class="hljs-type">FileReader</span> <span class="hljs-variable">reader</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">FileReader</span>(<span class="hljs-string">&quot;chapter23/userinfo.properties&quot;</span>);<br><br>		<span class="hljs-comment">// 新建一个Map集合</span><br>		<span class="hljs-type">Properties</span> <span class="hljs-variable">pro</span> <span class="hljs-operator">=</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Properties</span>();<br><br>		<span class="hljs-comment">// 调用Properties对象的load方法将文件中的数据加载到Map集合中。</span><br>		pro.load(reader); <span class="hljs-comment">// 文件中的数据顺着管道加载到Map集合中，其中等号=左边做key，右边做value</span><br><br>		<span class="hljs-comment">// 通过key来获取value呢？</span><br>		<span class="hljs-type">String</span> <span class="hljs-variable">username</span> <span class="hljs-operator">=</span> pro.getProperty(<span class="hljs-string">&quot;username&quot;</span>);<br>		System.out.println(username);<br><br>		<span class="hljs-type">String</span> <span class="hljs-variable">password</span> <span class="hljs-operator">=</span> pro.getProperty(<span class="hljs-string">&quot;password&quot;</span>);<br>		System.out.println(password);<br><br>		<span class="hljs-type">String</span> <span class="hljs-variable">data</span> <span class="hljs-operator">=</span> pro.getProperty(<span class="hljs-string">&quot;data&quot;</span>);<br>		System.out.println(data);<br><br>		<span class="hljs-type">String</span> <span class="hljs-variable">usernamex</span> <span class="hljs-operator">=</span> pro.getProperty(<span class="hljs-string">&quot;usernamex&quot;</span>);<br>		System.out.println(usernamex);<br>	&#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<p><strong>在属性配置文件中#是注释</strong><br>属性配置文件的key重复的话，value会自动覆盖！<br>最好不要有空格！<br>建议key和value之间使用&#x3D;的方式  不建议使用:<br>&#x3D;左边是key，&#x3D;右边是value  </p>
<div id="paginator"></div></div><div id="post-footer"><div id="pages"><div id="footer-link" style="right: calc(50% - 1px);order: 1;border-right: 1px solid #fe2;padding-left: unset;max-width: calc(50% - 4px);"><a href="/2022/09/10/JavaSE%E2%80%94%E2%80%94%E5%8F%8D%E5%B0%84-javasereflect/">← Next JavaSE——反射</a></div><div id="footer-link" style="left: 50%;order: 0;border-left: 1px solid #fe2;padding-right: unset;max-width: calc(50% - 5px);"><a href="/2022/09/02/JavaSE%E2%80%94%E2%80%94%E9%9B%86%E5%90%88%EF%BC%883%EF%BC%89%E4%B8%8E%E9%9B%86%E5%90%88%E6%80%BB%E7%BB%93-2022-09-02-17-03-49/">JavaSE——集合（3）与集合总结 Prev →</a></div></div></div><div id="Valine"></div></div><div id="bottom-btn"><a id="to-index" href="#toc-div" title="index">≡</a><a id="to-top" onClick="scrolls.scrolltop();" title="to top" style="opacity: 0; display: none;">∧</a></div></article><aside><div id="aside-top"><div id="about"><a href="/" id="logo"><img src="https://ak.hypergryph.com/assets/index/images/ak/pc/faction/1.png" alt="Logo"></a><h1 id="Dr"><a target="_blank" rel="noopener" href="https://github.com/Yue-plus">Oliver Chen</a></h1><div id="description"></div></div><div id="aside-block"><div id="toc-div"><h1>INDEX</h1><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AFIO%E6%B5%81"><span class="toc-number">1.</span> <span class="toc-text">什么是IO流</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#IO%E6%B5%81%E7%9A%84%E5%88%86%E7%B1%BB"><span class="toc-number">2.</span> <span class="toc-text">IO流的分类</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#IO%E6%B5%81%E5%A6%82%E4%BD%95%E5%AD%A6%E4%B9%A0%EF%BC%9F"><span class="toc-number">3.</span> <span class="toc-text">IO流如何学习？</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#java-IO%E6%B5%81%E7%9A%84%E5%9B%9B%E5%A4%A7%E5%AE%B6%E6%97%8F"><span class="toc-number">4.</span> <span class="toc-text">java IO流的四大家族</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%9C%80%E8%A6%81%E6%8E%8C%E6%8F%A1%E7%9A%84IO%E6%B5%81"><span class="toc-number">5.</span> <span class="toc-text">需要掌握的IO流</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#java-io-FileInputStream"><span class="toc-number">5.1.</span> <span class="toc-text">java.io.FileInputStream:</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#java-io-FileOutputStream"><span class="toc-number">5.2.</span> <span class="toc-text">java.io.FileOutputStream</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E7%9A%84%E5%A4%8D%E5%88%B6%E5%8E%9F%E7%90%86"><span class="toc-number">5.3.</span> <span class="toc-text">文件的复制原理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#java-io-FileReader"><span class="toc-number">5.4.</span> <span class="toc-text">java.io.FileReader</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#java-io-FileWriter"><span class="toc-number">5.5.</span> <span class="toc-text">java.io.FileWriter</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#java-io-BufferedReader"><span class="toc-number">5.6.</span> <span class="toc-text">java.io.BufferedReader</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#java-io-InputStreamReader"><span class="toc-number">5.7.</span> <span class="toc-text">java.io.InputStreamReader</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#java-io-BufferedWriter"><span class="toc-number">5.8.</span> <span class="toc-text">java.io.BufferedWriter</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#java-io-DataOutputStream"><span class="toc-number">5.9.</span> <span class="toc-text">java.io.DataOutputStream</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#java-io-DataInputStream"><span class="toc-number">5.10.</span> <span class="toc-text">java.io.DataInputStream</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#java-io-PrintStream"><span class="toc-number">5.11.</span> <span class="toc-text">java.io.PrintStream</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#File%E7%B1%BB"><span class="toc-number">6.</span> <span class="toc-text">File类</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%8B%B7%E8%B4%9D%E7%9B%AE%E5%BD%95"><span class="toc-number">6.1.</span> <span class="toc-text">拷贝目录</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BA%8F%E5%88%97%E5%8C%96%E4%B8%8E%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96"><span class="toc-number">7.</span> <span class="toc-text">序列化与反序列化</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BA%8F%E5%88%97%E5%8C%96"><span class="toc-number">7.1.</span> <span class="toc-text">序列化</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96"><span class="toc-number">7.2.</span> <span class="toc-text">反序列化</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%80%E6%AC%A1%E6%80%A7%E5%BA%8F%E5%88%97%E5%8C%96%E4%B8%8E%E5%8F%8D%E5%BA%8F%E5%88%97%E5%8C%96%E5%A4%9A%E4%B8%AA%E5%AF%B9%E8%B1%A1"><span class="toc-number">7.3.</span> <span class="toc-text">一次性序列化与反序列化多个对象</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#IO-Properties%E7%9A%84%E8%81%94%E5%90%88%E5%BA%94%E7%94%A8"><span class="toc-number">8.</span> <span class="toc-text">IO+Properties的联合应用</span></a></li></ol></div></div></div><footer><nobr><span class="text-title">ICP</span><a class="text-content" target="_blank" rel="noopener" href="https://beian.miit.gov.cn/">懒得备案</a></nobr><nobr><span class="text-title">©</span><span class="text-content">1970 to 2023</span></nobr><br><nobr>published with <a target="_blank" rel="noopener" href="http://hexo.io">Hexo</a></nobr><wbr><nobr> Theme <a target="_blank" rel="noopener" href="https://github.com/Yue-plus/hexo-theme-arknights">Arknight</a></nobr><wbr><nobr>by <a target="_blank" rel="noopener" href="https://github.com/Yue-plus">Yue_plus</a></nobr></footer></aside></main><canvas id="canvas-dust"></canvas><div id="cursor-container"><div id="cursor-outer"></div><div id="cursor-effect"></div></div><script src="/js/search.js"></script><script class="pjax-js">reset=_=>{new Valine({
 el: '#Valine'
 , appId: 'VXJpDLBtIuAgtIMNqazuy0eY-gzGzoHsz'
 , appKey: 'wzl7lI6VNnLw8deYXvRaTgOc' , placeholder: '此条评论委托企鹅物流发送'
});code.findCode();mermaid.init(undefined, ('.mermaid'));}</script><script src="//unpkg.com/@highlightjs/cdn-assets@11.4.0/highlight.min.js"></script><script src="/js/arknights.js"></script><script>window.addEventListener("load",()=>{reset()})</script></body></html>